name: "units-test"
on:
    pull_request:
    push:
        branches:
            - main
            - develope
            - "releases/*"

env:
    GITHUB_TOKEN: ${{secrets.GITHUB_TOKEN}}
    RECORD_DAY_RANGE: 300
    GITHUB_REPOSITORY: kevinshu1995/action-contribution-recorder
    RANK_JSON_PATH: ./contributor-leader-board.json
    MARKDOWN_PATH: ./test.md
    DISPLAY_CONTRIBUTOR_COUNTS: 10
    MARKDOWN_INSERT_KEY: CONTRIBUTION-LEADER-BOARD-TABLE

jobs:
    # unit tests
    units:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v3
            - run: npm ci
            - run: npm test

    # test action works running from the graph
    test:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v3
            - uses: ./

